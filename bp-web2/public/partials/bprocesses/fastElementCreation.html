<div class="fast-element-aside">
<div class="fast-element-form-close">
  <a ng-click="$parent.switchFastElementForm(bprocess)">X</a>
</div>
<div class="fast-element-show-model">
  <a href="/a#/bprocess/{{ $parent.bprocess.id }}/elements">Model</a>
</div>
<div class="fast-element-tree">
  <div ng-include src="'assets/partials/treeThumb.html'"></div>
</div>

</div>

<form novalidate="novalidate" ng-submit="fastCreateNewElem($parent.bprocess.newBpelem, $parent.bprocess);" class="form-horizontal form-fast-element-create">
    <div class="form-group element-form-fields">
    <div class="control-group">
      <h3>Add element in {{ $parent.bprocess.title }} process</h3>
    </div>
    <div class="head-fields">
    <div class="form-group element-form-fields control-group clearfix">
      <div class="controls col-xs-2">
        <label class="control-label col-sm-1" for="fastElemTitle">Title</label>
      </div>
      <div class="controls col-xs-4">
        <input type="text" id="fastElemTitle" class="form-control" ng-model="$parent.bprocess.newBpelem.title"/>
      </div>

    </div>
    <div class="form-group element-form-fields control-group clearfix">
      <div class="controls col-xs-2">
        <label class="control-label col-sm-1" for="fastElemDesc">{{ 'DESC' | translate }}</label>
      </div>
      <div class="controls col-xs-4">
        <textarea type="text" class="form-control" id="fastElemDesc" ng-model="$parent.bprocess.newBpelem.desc"/>
      </div>
    </div>

    <div class="form-group element-form-fields control-group clearfix">
    <div class="controls col-xs-2">
          <label class="control-label ng-binding type-label" for="inputElType">Type</label>
    </div>
      <div class="controls col-xs-2">
          <span class="selectedRefType">{{ $parent.bprocess.newBpelem.selectedRef.ref.title }}</span>
            <a ng-click="$parent.bprocess.newBpelem.refSelectHidden=false;" ng-show="$parent.bprocess.newBpelem.refSelectHidden == true;" class="expand-ref-select"><span class="moicon moicon-info expand-ref-select"></span></a>
      </div>
    </div><!-- form-group element-form-fields -->
    </div>
    <div class="ref-select-container clearfix" ng-hide="$parent.bprocess.newBpelem.refSelectHidden" ng-init="$parent.bprocess.newBpelem.selectedRef != undefined ? $parent.bprocess.newBpelem.refSelectHidden=false : refSelectHidden=true;">
  <select style="display:none;" name="category" id="categorySelect" ng-model="$parent.bprocess.newBpelem.refCategoryFilter" ng-init="$parent.bprocess.newBpelem.refCategoryFilter = refCategories[0]" ng-options="option for option in refCategories"><option value="0" selected="selected">Base</option></select>
    <div class="templateButton form-group clearfix">
      <div class="ref col-xs-5" ng-repeat="ref in $parent.$parent.refs" ng-class="{selected: $parent.bprocess.newBpelem.selectedRef.ref.id == ref.ref.id }">
        <a ng-mouseover="$parent.$parent.refElem(ref, $parent.bprocess.newBpelem)" ng-click="$parent.bprocess.newBpelem.refSelectHidden=true;" class="btn btn-small btn-primary container_brick" ng-class="isSelected(ref, $parent.bprocess.newBpelem.elem)">{{ ref.ref.title }}</a>
      </div>
    </div>
    <!--
    <div class="ref-desc form-group col-xs-8">
      <h6>{{ newBpelem.selectedRef.ref.title }}</h6>
      <p>{{ newBpelem.selectedRef.ref.desc }}</p>
      <ul>
        <li ng-repeat="state in newBpelem.selectedRef.bpstate"><span>State: {{state.title}}</span></li>
      </ul>
    </div>   -->
    </div>
    </div>


<!-- ref-select-container -->
    <!--
    <div class="control-group people-control-group">
      <div class="form-group element-form-fields">
      <div class="form-group control-group clearfix">
        <div class="controls col-xs-2">
          <label class="control-label col-sm-1" for="inputPerm">People</label>
        </div>
        <div class="controls col-xs-6" ng-init="newBpelem.perms = [];">
          <div class="perms perm-list" ng-repeat="perm in newBpelem.perms" ng-init="perm.account = accFetch(perm)">
            <span class="account-pic" tooltip="{{ perm.account.tooltip }}">
                <img ng-src="{{ perm.account.avatarUrl}}" alt="{{ perm.account.tooltip }}">
                <a ng-click="delPermForForm(perm,newBpelem.perms)" class="btn-delete minicon"></a>
            </span>
          </div>
          <select id="inputPerm" ng-model="newBpelem.perm" class="forUID" ng-options="employeegroup as credFetch(employeegroup) for employeegroup in employees_groups"></select>
          <a ng-click="createPermForForm(newBpelem.perm, newBpelem.perms, 'front')" class="btn btn-big btn-success">{{ 'ADD' | translate }}</a>
        </div>
      </div>
      </div>
    </div>
    <div class="control-group cost-control-group">
      <div class="form-group element-form-fields">
      <div class="form-group control-group clearfix">
        <div class="controls col-xs-2">
          <label class="control-label col-sm-1" for="inputPerm">Cost</label>
        </div>
        <div class="controls col-xs-6" ng-init="newBpelem.costs = [];">
          <div class="costs cost-list" ng-repeat="cost in newBpelem.costs">
            <span class="resource-block" tooltip="{{ cost.resource.title }}">
                {{ cost.resource.resource.title }} â€” {{ entityDecorator(cost.entities, cost.resource) }}
                <a ng-click="delElementResource(cost, newBpelem.costs)" class="btn-delete minicon"></a>
            </span>
          </div>
          <div class="input-resource-block">
               <span class="input-resource-block-title">Resouce</span>
              <select id="inputResource" ng-init="newBpelem.cost = {};" ng-model="newBpelem.cost.resource" ng-init="newBpelem.cost.resource=resources[0];newBpelem.cost.entity=newBpelem.cost.resource.entities[0]" ng-change="newBpelem.cost.entity=newBpelem.cost.resource.entities[0]" class="forResource" ng-options="res_cn as res_cn.resource.title for res_cn in resources"></select>
          </div>
          <div class="input-entity-block">
               <span class="input-entity-block-title">Entity</span>
              <select id="inputEntity" ng-model="newBpelem.cost.entities" class="forResource" ng-options="entity.id as entity.title for entity in newBpelem.cost.resource.entities"></select>
          </div>
          <a ng-click="createElementResource(newBpelem.cost, newBpelem.costs)" class="btn btn-big btn-success">{{ 'ADD' | translate }}</a>
        </div>
      </div>
      </div>
    </div> -->

    <input type="hidden" name="value" ng-init="$parent.bprocess.newBpelem.business=$parent.bprocess.business" ng-model="$parent.bprocess.newBpelem.business" value="{{ $parent.bprocess.business }}">
    <input type="hidden" name="value" ng-init="$parent.bprocess.newBpelem.process=$parent.bprocess.id" ng-model="$parent.bprocess.newBpelem.process" value="{{ $parent.bprocess.id }}">
    <input type="hidden" id="input_b_type" ng-model="$parent.bprocess.newBpelem.b_type"/>
    <input type="hidden" id="input_type_title" ng-model="$parent.bprocess.newBpelem.type_title"/>
    <input type="hidden" id="input_space_own" ng-model="$parent.bprocess.newBpelem.space_own"/>
    <input type="hidden" id="input_order" ng-init="$parent.bprocess.newBpelem.order" ng-model="$parent.bprocess.newBpelem.order" value="{{ orderFrontGen($parent.bprocess.newBpelem) }}"/>
    <input type="hidden" id="input_ref" ng-model="$parent.bprocess.newBpelem.ref"/>
    <div class="control-group form-submit form-group" style="clear:both;" ng-show="isManagerVal">
      <div class="controls">
        <button type="submit" class="btn btn-small btTxt submit btn lg solid-green ng-binding">{{ 'CREATE' | translate }}</button>
      </div>
    </div>
  </form>
