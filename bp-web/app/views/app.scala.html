@import play.api.i18n._

@import service.DemoUser
@import helper._

@(user: DemoUser)

@scripts = {
  <!--<script type="text/javascript" src="bower_components/ui-sortable/src/sortable.js"></script>-->
  <!--<script src='@routes.Assets.versioned("js/ui-bootstrap-custom-0.10.0.js")'></script>-->
  <!--<script src='@routes.Assets.versioned("js/ui-bootstrap-custom-tpls-0.10.0.js")'></script>-->
  <link rel="stylesheet" href='@routes.Assets.versioned("css/picaso.css")'>
  <link rel="stylesheet" href='@routes.Assets.versioned("bower_components/angular-ui-select/dist/select.min.css")'>
  <link rel="stylesheet" href='@routes.Assets.versioned("bower_components/angular-ui-tree/dist/angular-ui-tree.min.css")'>
  <link rel="stylesheet" href='@routes.Assets.versioned("bower_components/ngDialog/css/ngDialog.css")'>
  <link rel="stylesheet" href='@routes.Assets.versioned("bower_components/ngDialog/css/ngDialog-theme-default.css")'>
  <link rel="stylesheet" href='@routes.Assets.versioned("bower_components/ngDialog/css/ngDialog-theme-plain.css")'>
  <link rel="stylesheet" href='@routes.Assets.versioned("stylesheets/process.css")'>
  <link rel="stylesheet" media="screen" href="@routes.Assets.versioned("stylesheets/process_list.css")">
  <link rel="stylesheet" href='@routes.Assets.versioned("bower_components/pnotify/pnotify.core.css")'>
  <link rel="stylesheet" href='@routes.Assets.versioned("bower_components/pnotify/pnotify.buttons.css")'>
  <link rel="stylesheet" href='@routes.Assets.versioned("bower_components/pnotify/pnotify.core.css")'/>  
  <link rel="stylesheet" href='@routes.Assets.versioned("bower_components/angular-loading-bar/src/loading-bar.css")'/>
  <link rel="stylesheet" href='@routes.Assets.versioned("bower_components/bootstrap-daterangepicker/daterangepicker-bs3.css")'/>
  <link rel="import" href='@routes.Assets.versioned("bower_components/polymer/polymer.html")'>
  <!--<link href='//fast.fonts.net/cssapi/b9eaba6c-4710-4005-8ce7-ab53bba4f423.css' rel='stylesheet' type='text/css'>-->
  <link href='@routes.Assets.versioned("fonts/avenirnextcyr/stylesheet.css")' rel='stylesheet' type='text/css'>

<!--
<script src="@routes.Assets.versioned("javascripts/app_core.bundle.js")"></script>
-->

  <script>requirejs(['/assets/javascripts/common/main.js'], function (common) {console.log("required common app");});</script>

  <!--<link rel="import" href="bower_components/core-ajax/core-ajax.html">
  <link rel="import" href="bower_components/core-component-page/core-component-page.html">
  <link rel="import" href="bower_components/core-localstorage/core-localstorage.html">-->
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-13037685-4', 'auto');
  ga('send', 'pageview');
  </script>
}

@main(Messages("page.application"), user, scripts) {


<style>
.applicationFooter {
  display: none; 
}
</style>
<div class="app-container">
<div class="container app"> <!-- ng-app="minorityApp"> -->

<!--  <div>Minority App version:<span app-version></span></div></div>-->
<awesomeError></awesomeError>
<toaster-container></toaster-container>
<div id="main" class="container" data-ng-view>
</div>
<script src="http://apis.google.com/js/client.js"></script>
<script src="http://apis.google.com/js/api.js"></script>

<script type="text/javascript" src="https://apis.google.com/js/api.js?onload=onApiLoad"></script>
<script type="text/javascript" src="https://app.box.com/js/static/select.js"></script>
<script type="text/javascript">
(function() {
  var FilePicker = window.FilePicker = function(options) {
    this.apiKey = options.apiKey;
    this.clientId = options.clientId;
    this.buttonEl = options.buttonEl;
    this.onSelect = options.onSelect;
    if (this.buttonEl) {
      this.buttonEl.addEventListener('click', this.open.bind(this));    
      this.buttonEl.disabled = true;
    }
    gapi.client.setApiKey(this.apiKey);
    gapi.client.load('drive', 'v2', this._driveApiLoaded.bind(this));
    google.load('picker', '1', { callback: this._pickerApiLoaded.bind(this) });
  }
  FilePicker.prototype = {
    open: function() {    
      var token = gapi.auth.getToken();
      if (token) {
        this._showPicker();
      } else {
        this._doAuth(false, function() { this._showPicker(); }.bind(this));
      }
    },
    _showPicker: function() {
      var accessToken = gapi.auth.getToken().access_token;
      this.picker = new google.picker.PickerBuilder().
        addView(google.picker.ViewId.DOCUMENTS).
        setAppId(this.clientId).
        setOAuthToken(accessToken).
        setCallback(this._pickerCallback.bind(this)).
        build().
        setVisible(true);
    },
    _pickerCallback: function(data) {
      if (data[google.picker.Response.ACTION] == google.picker.Action.PICKED) {
        var file = data[google.picker.Response.DOCUMENTS][0],
          id = file[google.picker.Document.ID],
          request = gapi.client.drive.files.get({
            fileId: id
          });
          
        request.execute(this._fileGetCallback.bind(this));
      }
    },
    _fileGetCallback: function(file) {
      if (this.onSelect) {
        this.onSelect(file);
      }
    },
    _pickerApiLoaded: function() {
      this.buttonEl.disabled = false;
    },
    _driveApiLoaded: function() {
      this._doAuth(true);
    },
    _doAuth: function(immediate, callback) {  
      gapi.auth.authorize({
        client_id: this.clientId + '.apps.googleusercontent.com',
        scope: 'https://www.googleapis.com/auth/drive.readonly',
        immediate: immediate
      }, callback);
    }
  };
}());
</script>
<script>
//$(document).ready(function() {
    var boxSelect = new BoxSelect();
    boxSelect.success(function(response) {
        console.log(response);
    });
    boxSelect.cancel(function() {
        console.log("The user clicked cancel or closed the popup");
    });
//});
</script>
<script>
    function initPicker() {
      var picker = new FilePicker({
        apiKey: 'AIzaSyC_wPVwox46HJlkHVQWgKhy6dnZ0kYfCaA',
        clientId: '629371862094-egfiim60lfulkrvb9e3iqpl5a2nk5c69',
        buttonEl: document.getElementById('pick'),
        onSelect: function(file) {
          console.log(file);          
        }
      }); 
    }
</script>
<script src="https://www.google.com/jsapi?key=AIzaSyC_wPVwox46HJlkHVQWgKhy6dnZ0kYfCaA"></script>
<script src="https://apis.google.com/js/client.js?onload=initPicker"></script>      
<script type="text/javascript" src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" data-app-key="o4zxff9txoicjkl"></script>








</div>
</div>
} 
