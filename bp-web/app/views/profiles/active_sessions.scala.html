@import decorators._
@import models.DAO._
@(sessions: List[SessionContainer])
	
  <div class="teamChangeBox teamPaddedBox">
    <div class="session_header__top_bar">
	    <header class="panel-heading head-border">Active sessions</header>
    </div>
    <div class="session_list">
    	@sessions.map { session_cn => 
          @if(session_cn.sessions.length > 0) {
          <div class="session_list__session">
    		  <div class="session_list__session__process">
    		  	<a href="/a#/bprocess/@{session_cn.process.id.getOrElse(0)}">@session_cn.process.title</a>
    		  </div>
          
            
@session_cn.sessions.map { session =>
<div class="active-sessions">
                                                <div class="info">
                                                    <div class="desc pull-left"><a href="/a#/bprocess/@{session.process.id.getOrElse(0)}/elements?session=@session.session.id"> 
                                                    @session.station.get.note match {
                                                        case Some(note) => { @{"â€”" + note} }
                                                        case _ => {  }
                                                    }
                                                    <time class="updated" itemprop="dateModified" datetime="@session.station.get.created_at"></time></a></div>
                                                    <div class="percent pull-right">@{session.percent}%</div>
                                                </div>
                                                <div class="progress progress-sm">
                                                    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: @{session.percent}%">
                                                        <span class="sr-only">@{session.percent}% </span>
                                                    </div>
                                                </div>
</div>
}
    	</div>
      }  
      }
    </div>
    <a href="/a#/sessions" class="single-mail text-center">View All Sessions</a>
  </div>
<script>
var now = moment();
$('time').each(function(i, e) {
    var time = moment($(e).attr('datetime'));

    if(now.diff(time, 'days') != 1) {
        $(e).text('Started ' + time.from(now));
    }
});
</script>