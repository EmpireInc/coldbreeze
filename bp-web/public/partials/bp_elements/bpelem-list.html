<div class="container elements-list">
<div class="traverse-marker"></div>

<div class="tab-content">

<!-- 
<div class="tab-pane active" id="edit" ng:show="tree == 1 && bpelems.length > 0" ng:init="tree=1">
  <div ng-include src="'partials/tree.html'"></div>
</div>
-->


</div>
<div class="tab-content">

<!--
<div class="tableMinListWrap">
<div ng:hide="tree == 1">
  <a href="" role="tab" class="createMin ajaxLink cacheable"  data-toggle="tab" ng:click="tree=1"><span class="glyphicon glyphicon-chevron-down"></span> {{ 'TREE' | translate }}</a>
</div>
<div ng:show="tree == 1">
  <a href="" role="tab" class="createMin ajaxLink cacheable" data-toggle="tab" ng:click="tree=0"><span class="glyphicon glyphicon-chevron-up"></span> {{ 'TREE' | translate }}</a>
</div>
-->


<div class="tableMinListFilter filterLayer">


</div>


</div>

<div class="active-station-alert alert alert-info" ng:show="hasActiveStation">
  {{ 'RUNNED' | translate }} <strong>{{ 'WILL_BE_SHUTDOWN' | translate }}</strong>
{{ 'CREATE_OR_COPY' | translate }} <a ng:click="copyProcess()">{{ 'COPY' | translate }}</a> {{ 'CREATE_OR_COPY2' | translate }}
</div>

<div class="process-info header-frame">
<h3><edit-in-place value="bp.title"></edit-in-place></h3>
<ul class="process-control" ng-show="isManagerVal">
 <li><a href="" role="tab" class="createMin change ajaxLink cacheable" data-toggle="tab" ng:click="editProcess()"> {{ 'EDIT' | translate }} </a></li>
<!-- <li><a class="allStation" href="/a#/bprocess/{{ bp.id }}/stations">{{ 'STATIONS' | translate }}</a></li> -->
 <li><a class="tableMinControlsLink ajaxLink tableMinLinkPeople" ng-click="perm()">{{ 'PEOPLE' | translate }} </a></li>
 <li><a class="tableMinControlsLink teamSettingsLink tableMinLinkSettings" ng-click="modalShare()">{{ 'SHARE' | translate }}</a></li>
</ul>

</div>

<div class="tab-content">


<div class="span8 container tab-pane active" ng:show="viewstyle == 1" ng:init="viewstyle=1">


  <ul class="nav nav-tabs elem-nav" role="tablist" ng-show="isManagerVal">
    <!--<a href="" ng:click="openNewElem()">.</a> -->
    <li><a href="" role="tab" class="addElemTab" data-toggle="tab" ng:show="!inSession" ng:click="newselected==1 ? newselected=0 : newselected=1 "><span class="glyphicon glyphicon-plus"></span>  </a></li>
  </ul>




<div class="tab-content">
<!--
<div class="elem-desc" ng:show="newselected != 1 && bpelems.length < 1 && isManagerVal">
<div class="confirm-desc">
<h3>{{ 'CONFIRM' | translate }} </h3>
<p>{{ 'CONFDESCFULL' | translate }} </p>
</div>
<div class="container-desc">
<h3>{{ 'CONTAINER' | translate }} </h3>
<p>{{ 'CONTDESCFULL' | translate }} </p>
</div>

</div> -->

<div class="tab-pane active" id="edit" ng:show="newselected == 1 && !inSession">
 <form novalidate="novalidate" class="form-horizontal form-new-bpelem" ng-class="newBpelem.type_title">
    <div class="col-xs-3 element-form-fields">
    <div class="control-group form-group">
      <div class="controls col-xs-8">
        <label class="control-label col-sm-1" for="inputTitle">{{ 'TITLE' | translate }}</label>
        <input type="text" id="inputTitle" class="form-control" ng-model="newBpelem.title"/>
      </div>
    </div>
    <div class="control-group form-group">
      <div class="controls col-xs-8">
        <label class="control-label col-sm-1" for="inputBusinessId">{{ 'DESC' | translate }}</label>
        <textarea type="text" class="form-control" id="inputBusinessId" ng-model="newBpelem.desc"/>
      </div>
    </div>
    </div>
    <select name="category" id="categorySelect" ng-model="newBpelem.refCategoryFilter" ng-init="newBpelem.refCategoryFilter = refCategories[0]" ng-options="option for option in refCategories"></select>
    <div class="templateButton col-xs-8 clearfix">
      <div class="ref" ng-repeat="ref in refs | filter: {ref: {category: newBpelem.refCategoryFilter}} ">
        <a ng-click="refElem(ref, newBpelem)" ng-class="isSelected(ref, newBpelem)" class="btn btn-small btn-primary container_brick">{{ ref.ref.title }}</a>
      </div>
    </div>
    <div class="ref-desc col-xs-8">
      {{ newBpelem.selectedRef.ref.desc }}
      <ul>
        <li ng-repeat="state in newBpelem.selectedRef.bpstate"><span>State: {{state.title}}</span></li>
      </ul>
    </div>    
    <input type="hidden" name="value" ng-model="newBpelem.business" value="{{ business() }}">
    <input type="hidden" name="value" ng-model="newBpelem.process" value="{{ BPid }}">
    <input type="hidden" id="input_b_type" ng-model="newBpelem.b_type"/>
    <input type="hidden" id="input_type_title" ng-model="newBpelem.type_title"/>
    <input type="hidden" id="input_space_own" ng-model="newBpelem.space_own"/>
    <input type="hidden" id="input_order" ng-model="newBpelem.order" value="{{ orderFrontGen(newBpelem) }}"/>
    <input type="hidden" id="input_ref" ng-model="newBpelem.ref"/>

    <div class="control-group form-submit form-group" style="clear:both;" ng-show="isManagerVal">
      <div class="controls">
        <a ng-click="createNewElem()" class="btn btn-small btn-primary">{{ 'CREATE' | translate }}</a>
      </div>
    </div>
  </form>
</div>

</div><!-- tab-content -->

<div class="elements" ng-repeat="bpelem in bpelems | orderBy:'order'">
<div class="proc-element" ng-class="'elem-'+bpelem.id">
    <div class="element-header">
    <div class="primary-states">
    </div>
    <div class="info">
      <div class="type">{{ type_short[bpelem.type_title] }}
         <ul class="type-tabs" ng-init="bpelem.hovered=false" role="tablist" ng-mouseover="bpelem.hovered == true ? bpelem.hovered=false : bpelem.hovered=true" ng-show="(isManagerVal && !inSession && selected == 2) || (bpelem.hovered == true)">
           <li><a role="tab" data-toggle="tab" ng:init="selected=1" ng:click="selected == 1 ? selected=2 : selected=1">
           <span class="glyphicon glyphicon-edit"></span></a></li>
           <li><a ng-click="deleteElem(bpelem)"><span class="glyphicon glyphicon-remove"></span></a></li>
           <li><a ng:click="moveUpElem(bpelem)"><span class="glyphicon glyphicon-arrow-up"></span></a></li>
           <li><a ng:click="moveDownElem(bpelem)"><span class="glyphicon glyphicon-arrow-down"></span></a></li>
         </ul>
      </div>
      <h4 class="title">{{ bpelem.title }}</h4>
      <h6 class="desc">{{ bpelem.desc }}</h6>
    </div>
    <!--<ul class="elem-control elem-tabs" role="tablist" ng-show="isManagerVal && !inSession">
      <li><a role="tab" data-toggle="tab" ng:init="selected=1" ng:click="selected == 1 ? selected=2 : selected=1"><span class="glyphicon glyphicon-edit"></span></a></li>
      <li><a ng-click="deleteElem(bpelem)"><span class="glyphicon glyphicon-remove"></span></a></li>
      <li><a ng:click="moveUpElem(bpelem)"><span class="glyphicon glyphicon-arrow-up"></span></a></li>
      <li><a ng:click="moveDownElem(bpelem)"><span class="glyphicon glyphicon-arrow-down"></span></a></li>
    </ul>-->
    <ul class="elem-control elem-tabs" role="tablist" ng-show="inSession">
      <p ng-show="bpelem.states.length > 0">
        <abbr class="session__header__created_at" title="{{ bpelem.states[0].updated_at | amDateFormat:'dddd, MMMM Do YYYY, h:mm:ss a' }}" am-time-ago="bpelem.states[0].updated_at"></abbr>
      </p>
    </ul>
    <ul class="elem-control elem-tabs input-logs" ng-show="inSession && bpelem.ilogs.length > 0">
      <li ng-repeat="ilog in bpelem.ilogs">{{ ilog.uid }}</li>
    </ul>
    </div>
    <div class="tab-pane active" id="edit" class="proc-element-edit" ng:show="selected == 2">
        <div ng-include src="'assets/partials/bp_elements/bpelem-edit.html'"></div>
    </div>
    <div class="right-bar" ng:init="exp=false" ng-class="stateClass(masterState(bpelem))" ng-class="exp == active ? 'exp-active' : 'exp-disabled'">
      <div class="states-row">
        <div class="state-row">
          <div class="row-top">
            <div class="state">
              <div class="switcher" ng-repeat="switcher in bpelem.states | limitTo: 1">
              <div class="state-thumbnail" ng-class="stateActiveClass(masterState(bpelem))">
              <span class="switcher-icon" ng-class="switcher.switch_type"></span>
                  <div class="neutral">{{ masterState(bpelem).neutral }}</div>
                  <div class="middleable">{{ masterState(bpelem).middle }}</div>
                  <div class="oposite">{{ masterState(bpelem).oposite }}</div>
                  <div class="ended">{{ masterState(bpelem).title }}</div>
              </div>
            </div>
            </div>
            
          </div>
          <div class="row-bottom">
           
          </div>
        </div>
      </div>
      <div class="expanded-element" ng:show="exp == active">
            <div class="reactions">
              <div class="reaction" ng-repeat="reaction in bpelem.reactions">
                <span class="reaction-icon moicon moicon-sphere"></span>
                <div class="reaction-title">{{ capitalizeFirstLetter(reaction.reaction.title) }}</div>
                  <span class="reaction_list__reaction__state_outs" ng-repeat="state_out in reaction.reaction_state_outs">
                  {{ stateOutAct(state_out) }} {{ stateByStateRef(state_out.state_ref) }} 
                  </span>
              </div>
            </div>
            <div class="state" ng-class="stateClass(state)" ng-repeat="state in bpelem.states">
              <div class="switcher" ng-repeat="switcher in state.switches">
                <div class="state-thumbnail" ng-class="stateActiveClass(state)">
                  <span class="switcher-icon" ng-class="switcher.switch_type"></span>
                  <div class="neutral">{{ state.neutral }}</div>
                  <div class="middleable">{{ state.middle }}</div>
                  <div class="oposite">{{ state.oposite }}</div>
                  <div class="ended">{{ state.title }}</div>
                  {{ stateDecoration(state) }} {{ switcherDecoration(switcher) }}
                </div>
            </div>
            </div>      
      </div>
      <div class="row-selector"></div>
      <div class="elem-expander" ng:click="exp == false ? exp=active : exp=false"><span class="uicon-svg93"></span>
      </div>
    </div>

<div class="proc-element-spaces">
      <!--<div class="proc-space">
        <div class="space-subbricks">
          <div class="space-subbrick">
            <div class="element-header">
                  <div class="primary-states">
                  </div>
                  <div class="info">
                    <h4 class="title">Subbrick</h4>
                  </div>
                  </div>
                  
          </div>
        </div>
        <div class="space-elements">
            <div class="space-element">
            <div class="element-header">
                <div class="primary-states">
                </div>
                <div class="info">
                  <div class="type">CF</div>
                  <h4 class="title">Element</h4>
                  <h6 class="desc">On front</h6>
                </div>
                </div>
                <div class="right-bar">
                  <div class="states-row">
                    <div class="state-row">
                      <div class="row-top">
                        s top <b>Bold </b>
                      </div>
                      <div class="row-bottom">
                        s bottom
                      </div>
                    </div>
                  </div>
                  <div class="row-selector"></div>
                </div>          
            </div>
        </div>
      </div>-->
<div class="proc-element-spaces">
          <div ng-include src="'assets/partials/bp_elements/elem_container_tmp.html'"></div>
</div>
        </div>
  </div>  
</div>
  
 <!-- 
<div class="front-blocks" ng-repeat="bpelem in bpelems | orderBy:'order'">
  
  <div class="tab-content">
    <div class="block-card tab-pane active" id="show">
      <div class="card-pipe">
        <span class="primary">{{ bpelem.order }}: {{ bpelem.title }}</span>
        <span class="descr">{{ bpelem.desc }}</span>
        <span class="type">{{ bpelem.b_type }}: {{ bpelem.type_title }}</span>
        <ul class="elem-control elem-tabs" role="tablist" ng-show="isManagerVal">
          <li class="active"><a href="" role="tab" data-toggle="tab" ng:click="selected=1"><span class="glyphicon glyphicon-list-alt"></span></a></li>
          <li><a href="" role="tab" data-toggle="tab" ng:click="selected=2"><span class="glyphicon glyphicon-edit"></span></a></li>
          <li><a ng-click="deleteElem(bpelem)"><span class="glyphicon glyphicon-remove"></span></a></li>
          <li><a href="" ng:click="moveUpElem(bpelem)"><span class="glyphicon glyphicon-arrow-up"></span></a></li>
          <li><a href="" ng:click="moveDownElem(bpelem)"><span class="glyphicon glyphicon-arrow-down"></span></a></li>
        </ul>
      </div>
      <div class="tab-pane active" id="edit" ng:show="selected == 2">
        <div ng-include src="'assets/partials/bp_elements/bpelem-edit.html'"></div>
      </div>
      
      <div ng-include src="'assets/partials/bp_elements/elem_container_tmp.html'"></div>
    </div>
  </div>
</div>-->

























  <ul class="nav nav-tabs" role="tablist">
    <!--<li><a href="" role="tab" data-toggle="tab" ng:click="newselected=2">New Space</a></li>-->
  </ul>
    <div class="tab-content">
<div class="tab-pane active" id="edit" ng:show="newselected == 2">
<form novalidate="novalidate" class="form-horizontal">
    <div class="control-group">
      <label class="control-label" for="inputBusinessId">space.bprocess:</label>
      <div class="controls">
        <input type="number" id="inputBusinessId" ng-model="newSpace.bprocess" value="{{ BPid }}"/>
        <input type="hidden" name="value" ng-model="newSpace.bprocess" value="{{ BPid }}">
      </div>
    </div>
    <div class="control-group">
      <label class="control-label" for="inputBusinessId">space.index:</label>
      <div class="controls">
      <input type="number" id="inputBusinessId" ng-model="newSpace.index" value="{{ indexSpaceGen(newSpace) }}"/>
      </div>
    </div>
    <div class="control-group">
      <label class="control-label" for="inputBusinessId">space.container:</label>
      <div class="controls">
        <input type="checkbox" id="inputBusinessId" ng-model="newSpace.container" value="false"/>
      </div>
    </div>
    <div class="control-group">
      <label class="control-label" for="inputBusinessId">space.subbrick:</label>
      <div class="controls">
        <input type="checkbox" id="inputBusinessId" ng-model="newSpace.subbrick" value="false"/>
      </div>
    </div>
    <div class="control-group">
      <label class="control-label" for="inputBusinessId">space.brick_front:</label>
      <div class="controls">
        <input type="number" id="inputBusinessId" ng-model="newSpace.brick_front"/>
      </div>
    </div>
    <div class="control-group">
      <label class="control-label" for="inputBusinessId">space.brick_nested:</label>

      <div class="controls">
        <input type="number" id="inputBusinessId" ng-model="newSpace.brick_nested"/>
      </div>
    </div>
    <div class="control-group">
      <label class="control-label" for="inputBusinessId">space.nestingLevel:</label>
      <div class="controls">
        <input type="number" id="inputBusinessId" ng-model="newSpace.nestingLevel"/>
      </div>
    </div>
    <div class="control-group">
      <div class="controls">
        {{ newSpace }}
        <a ng-click="createNewSpace()" class="btn btn-small btn-primary">Create</a>
        <a ng:click="newselected=0" class="btn btn-small btn-primary">Cancel</a>
      </div>
    </div>
  </form>
</div></div>









 </div>





</div>
</div>
  

  
<div class="elements mocking">
  
  
  <div class="proc-element">
    <div class="element-header">
    <div class="primary-states">
    </div>
    <div class="info">
      <div class="type">CF</div>
      <h4 class="title">Element</h4>
      <h6 class="desc">Desc with nesting structure</h6>
    </div>
    </div>
    <div class="right-bar">
      <div class="states-row">
        <div class="state-row">
          <div class="row-top">
            s top <b>Bold </b>
          </div>
          <div class="row-bottom">
            s bottom
          </div>
        </div>
      </div>
      <div class="row-selector"></div>
    </div>
    <div class="proc-element-spaces">
      <div class="proc-space">
        <div class="space-subbricks">
          <div class="space-subbrick">
            <div class="element-header">
                  <div class="primary-states">
                  </div>
                  <div class="info">
                    <h4 class="title">Subbrick</h4>
                  </div>
                  </div>
                  
          </div>
        </div>
        <div class="space-elements">
            <div class="space-element">
            <div class="element-header">
                <div class="primary-states">
                </div>
                <div class="info">
                  <div class="type">CF</div>
                  <h4 class="title">Element</h4>
                  <h6 class="desc">On front</h6>
                </div>
                </div>
                <div class="right-bar">
                  <div class="states-row">
                    <div class="state-row">
                      <div class="row-top">
                        s top <b>Bold </b>
                      </div>
                      <div class="row-bottom">
                        s bottom
                      </div>
                    </div>
                  </div>
                  <div class="row-selector"></div>
                </div>          
            </div>
        </div>
      </div>
      
      <div class="proc-space">
        <div class="space-subbricks">
        </div>
        <div class="space-elements">
            <div class="space-element">
            <div class="element-header">
                <div class="primary-states">
                </div>
                <div class="info">
                   <div class="type">CF</div>
                  <h4 class="title">Element</h4>
                  <h6 class="desc">On front</h6>
                </div>
                </div>
                <div class="right-bar">
                  <div class="states-row">
                    <div class="state-row">
                      <div class="row-top">
                        s top <b>Bold </b>
                      </div>
                      <div class="row-bottom">
                        s bottom
                      </div>
                    </div>
                  </div>
                  <div class="row-selector"></div>
                </div>          
            </div>
        </div>
      </div>
            
      
      
    </div>
  </div>
  
</div>
  
  
<div class="session-info" ng-show="inSession" ng-click="session_bar == 'hiding' ? session_bar='shown' : session_bar='hiding'">
        <div class="progress">
          <div class="progress-bar" role="progressbar" aria-valuenow="@{session.percent}" aria-valuemin="0" aria-valuemax="100" style="width: {{ session.percent}}%">
            {{ session.percent}}%
          </div>
        </div>
        <div class="started_at">
          Started <abbr class="session__header__created_at" title="{{ session.session.created_at | amDateFormat:'dddd, MMMM Do YYYY, h:mm:ss a' }}" am-time-ago="session.session.created_at"></abbr>
        </div>
        <div class="expand_sessions">
          <a><span class="uicon-svg92"></span>Sessions</a>
        </div>


</div>
<div id="proc-sessions" class="proc-sessions" ng-init="session_bar='hiding'"ng-class="session_bar" ng-click="session_bar == 'hiding' ? session_bar='shown' : session_bar='hiding'">
    <div class="proc-session active" ng-click="resetSession()" data-desc="Model">
    </div> 
<a href="a#/bprocess/{{session.process.id}}/elements?session={{session.session.id}}" ng-click="changeSession(session)" ng-repeat="session in sessions | limitTo: 5" class="current-proc-session-info session-link proc-session"  data-desc="Session #{{$index+1 }}">
</a> 

<div class="allSessions"><a href="/a#/bprocess/{{ BPid }}/stations">All</a></div>
</div>
</div>




<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
<style>
@import url(http://fonts.googleapis.com/css?family=Open+Sans:300,400,700,600);
</style>











<script>
$(document).ready( function() {
  $('.proc-session').each(function(index, element) {
    // element == this
    $(element).not('.active').addClass('done');
    //$('.done').html('<i class="icon-ok"></i>');
    if($(this).is('.active')) {
      return false;
    }
  });    
});
</script>
